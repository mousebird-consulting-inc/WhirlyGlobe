<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>CartoDB Layer</title>
  <meta name="description" content="A high performance map and globe toolkit for iOS and Android.
">

  <!-- Bootstrap -->
  <link href="/WhirlyGlobe/css/bootstrap.min.css" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="/WhirlyGlobe/css/main.css">
  <link rel="canonical" href="http://mousebird.github.io//WhirlyGlobe/tutorial/cartodb_layer.html">

  <!-- Fontwork -->
  <link rel="stylesheet" type="text/css" href="/WhirlyGlobe/css/MyFontsWebfontsKit.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>

  <!-- Fav Icon -->
  <link rel="shortcut icon" href="/WhirlyGlobe/images/fav-icon.ico" />

  <!--
  /**
   * @license
   * MyFonts Webfont Build ID 2914949, 2014-11-03T22:17:38-0500
   *
   * The fonts listed in this notice are subject to the End User License
   * Agreement(s) entered into by the website owner. All other parties are
   * explicitly restricted from using the Licensed Webfonts(s).
   *
   * You may obtain a valid license at the URLs below.
   *
   * Webfont: Museo-700 by exljbris
   * URL: http://www.myfonts.com/fonts/exljbris/museo/700/
   *
   * Webfont: Museo-300 by exljbris
   * URL: http://www.myfonts.com/fonts/exljbris/museo/300/
   *
   * Webfont: Museo-500 by exljbris
   * URL: http://www.myfonts.com/fonts/exljbris/museo/500/
   *
   *
   * License: http://www.myfonts.com/viewlicense?type=web&buildid=2914949
   * Licensed pageviews: 10,000
   * Webfonts copyright: Copyright (c) 2008 by Jos Buivenga/exljbris. All rights reserved.
   *
   * © 2014 MyFonts Inc
  */
  -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56793306-1', 'auto');
  ga('send', 'pageview');

</script>

</head>

  <body>
    <div id="wrap">
      <header>

  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/WhirlyGlobe/"><img src="/WhirlyGlobe/images/WhirlyGlobe-Maply-33.png" width="239" height="33" alt="WhirlyGlobe-Maply"></a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/WhirlyGlobe/">Home</a></li>
          <li><a href="/WhirlyGlobe/tutorial/getting_started.html">Tutorial</a></li>
          <li><a href="/WhirlyGlobe/reference/reference.html">Reference</a></li>
          <li><a href="/WhirlyGlobe/apps/apps.html">Apps</a></li>
        </ul>
      </div>
    </div>
  </div>

</header>


      <div class="container">
        <div class="row">
          <div class="col-sm-9 tutorial tutorial-main">

            <h2>CartoDB Layer</h2>
            <p>In this tutorial we’re going to do something fun and complex.  We’ll query buildings from a remote spatial database, hosted by <a href="http://cartodb.com" target="_blank">CartoDB</a>.  We’ll fetch them much like we do remote image maps and we’ll toss them on some satellite imagery.</p>

<p>Let’s look at the data source.</p>

<h3 id="cartodb">CartoDB</h3>

<p><a href="http://cartodb.com" target="_blank">CartoDB</a> is a cloud based spatial database.  Built on top of PostgreSQL with a whole lot of front end logic, it’s a nice way to interact with spatial data sets.</p>

<p><img src="/WhirlyGlobe/images/tutorial/cartodb_pluto.png" alt="CartoDB PLUTO" /></p>

<p>We’re going to use one of their examples, <a href="https://github.com/CartoDB/cartodb-pluto" target="_blank">New York Primary Land Use Tax Lot Output</a> or PLUTO for short.  It contains many, perhaps most, of the buildings in New York with related data.</p>

<p>That’s kind of huge, even just for one borough.  We can’t display it all at once and it would be rude to query the whole thing.  So we need to break the queries down into tiles.</p>

<h3 id="quad-paging-layer">Quad Paging Layer</h3>

<p>To keep things small and fast on a mobile device, we must load only what we’re looking at.  Easer to say than to do.  We can do that for image maps, as you’ve seen from the examples.  The MaplyQuadPagingLayer is how we do it for everything else.</p>

<p><img src="/WhirlyGlobe/images/tutorial/globezoomnumbers.gif" alt="Paging" /></p>

<p>Since we don’t really know what’s in a vector data set, what format it’s in, or how it should look, we need you to fill in the details.  The MaplyQuadPagingLayer will handle the tiling logic, but you have to actually fetch and display the data.  It’s easier than it sounds.</p>

<p>You make a new class that implements the MaplyPagingDelegate.  There’s one important call to go get your data and then a bunch of WhirlyGlobe-Maply methods to display it.  The MaplyQuadPagingLayer does the rest.</p>

<h3 id="helloearth">HelloEarth</h3>

<p>You’ll need a sample project for this tutorial.  Go back and start with the <a href="hello_earth.html">Hello Earth</a> tutorial and work up to at least <a href="remote_image_layer.html">Remote Image Layer</a>.  We’ll want that satellite imagery for a background.</p>

<p><img src="/WhirlyGlobe/images/tutorial/adding_vector_data_1.png" alt="Xcode HelloEarth" /></p>

<p>If you haven’t got one here is a suitable ViewController file to start with (for <a href="/WhirlyGlobe/tutorial/code/ViewController_adding_vector_data.m">Objective-C</a> or <a href="/WhirlyGlobe/tutorial/code/ViewController_adding_vector_data.swift">Swift</a>).</p>

<h3 id="cartodblayer">CartoDBLayer</h3>

<p>We’ll create a new class called <strong>CartoDBLayer</strong>.  Its job is to talk to CartoDB and display what it gets back.  The toolkit will call for every tile the user can see.</p>

<p><img src="/WhirlyGlobe/images/tutorial/cartodb_layer_1.png" alt="CartoDBLayer" /></p>

<p>That will create two new files, <em>CartoDBLayer.h</em> and <em>CartoDBLayer.m</em>, or just a simple <em>CartoDBLayer.swift</em> if you prefer.</p>

<p>Here’s what <em>CartoDBLayer</em> header should look like. For Swift, you can see only a small portion of the class:</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="cp">#import &lt;WhirlyGlobeComponent.h&gt;
</span>
<span class="k">@interface</span> <span class="nc">CartoDBLayer</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="o">&lt;</span><span class="n">MaplyPagingDelegate</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">search</span><span class="p">;</span>
    <span class="n">NSOperationQueue</span> <span class="o">*</span><span class="n">opQueue</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="n">assign</span><span class="p">)</span> <span class="kt">int</span> <span class="n">minZoom</span><span class="p">,</span><span class="n">maxZoom</span><span class="p">;</span>

<span class="c1">// Create with the search string we'll use
</span><span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="nf">initWithSearch</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">search</span><span class="p">;</span>

<span class="k">@end</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="kt">CartoDBLayer</span><span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">MaplyPagingDelegate</span> <span class="p">{</span>

   <span class="kd">private</span> <span class="k">var</span> <span class="nv">_minZoom</span> <span class="o">=</span> <span class="kt">Int32</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
   <span class="kd">private</span> <span class="k">var</span> <span class="nv">_maxZoom</span> <span class="o">=</span> <span class="kt">Int32</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

   <span class="kd">private</span> <span class="k">var</span> <span class="nv">search</span><span class="p">:</span> <span class="kt">String</span>
   <span class="kd">private</span> <span class="k">var</span> <span class="nv">opQueue</span><span class="p">:</span> <span class="kt">NSOperationQueue</span><span class="p">?</span>

   <span class="c1">// Create with the search string we'll use</span>
   <span class="nf">init</span><span class="p">(</span><span class="nv">search</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// TODO</span>
   <span class="p">}</span>

   <span class="kd">func</span> <span class="nf">minZoom</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int32</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_minZoom</span> <span class="p">}</span>
   <span class="kd">func</span> <span class="nf">maxZoom</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Int32</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_maxZoom</span> <span class="p">}</span>

   <span class="kd">func</span> <span class="nf">setMinZoom</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="kt">Int32</span><span class="p">)</span> <span class="p">{</span> <span class="n">_minZoom</span> <span class="o">=</span> <span class="n">value</span> <span class="p">}</span>
   <span class="kd">func</span> <span class="nf">setMaxZoom</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="kt">Int32</span><span class="p">)</span> <span class="p">{</span> <span class="n">_maxZoom</span> <span class="o">=</span> <span class="n">value</span> <span class="p">}</span>

   <span class="kd">func</span> <span class="nf">startFetchForTile</span><span class="p">(</span><span class="nv">tileID</span><span class="p">:</span> <span class="kt">MaplyTileID</span><span class="p">,</span> <span class="n">forLayer</span> <span class="nv">layer</span><span class="p">:</span> <span class="kt">MaplyQuadPagingLayer</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// TODO</span>
   <span class="p">}</span>
<span class="p">}</span></code></pre></div>

</li></ul>

<p>The interesting part here is the MaplyPagingDelegate.  We’ll need to implement a few methods for it like so.</p>

<ul>
  <li>minZoom is the minimum zoom level we’ll support (in Swift, we need getter and setter methods and backing variables)</li>
  <li>maxZoom is the maximum zoom level we’ll support.</li>
  <li>startFetchForTile:forLayer: is the method that does the actual work.</li>
</ul>

<p>We’ll be using that NSOperationQueue and filling in the init method later.  Let’s’ hook this layer into our app.</p>

<h3 id="adding-a-paging-layer">Adding a Paging Layer</h3>

<p>We want to set up a paging layer in the main view controller and start the viewer near our data.  Open up your ViewController implementation file.</p>

<p><img src="/WhirlyGlobe/images/tutorial/cartodb_layer_2.png" alt="ViewController.m" /></p>

<p>In Objective-C, at the top, add a new import.</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="cp">#import "CartoDBLayer.h"</span></code></pre></div>

<p>Now look for where it says “start up over San Francisco”.  We want to start over Manhattan instead, zoomed in.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// start up over New York
</span><span class="k">if</span> <span class="p">(</span><span class="n">globeViewC</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">globeViewC</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mo">0002</span><span class="p">;</span>
    <span class="p">[</span><span class="n">globeViewC</span> <span class="nf">animateToPosition</span><span class="p">:</span><span class="n">MaplyCoordinateMakeWithDegrees</span><span class="p">(</span><span class="o">-</span><span class="mi">73</span><span class="p">.</span><span class="mi">99</span><span class="p">,</span><span class="mi">40</span><span class="p">.</span><span class="mi">75</span><span class="p">)</span>
    <span class="nf">time</span><span class="p">:</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">globeViewC</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mo">0002</span><span class="p">;</span>
    <span class="p">[</span><span class="n">mapViewC</span> <span class="nf">animateToPosition</span><span class="p">:</span><span class="n">MaplyCoordinateMakeWithDegrees</span><span class="p">(</span><span class="o">-</span><span class="mi">73</span><span class="p">.</span><span class="mi">99</span><span class="p">,</span><span class="mi">40</span><span class="p">.</span><span class="mi">75</span><span class="p">)</span>
    <span class="nf">time</span><span class="p">:</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// start up over New York</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">globeViewC</span> <span class="o">=</span> <span class="n">globeViewC</span> <span class="p">{</span>
    <span class="n">globeViewC</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mf">0.0002</span>
    <span class="n">globeViewC</span><span class="o">.</span><span class="nf">animateToPosition</span><span class="p">(</span><span class="kt">MaplyCoordinateMakeWithDegrees</span><span class="p">(</span><span class="o">-</span><span class="mf">73.99</span><span class="p">,</span> <span class="mf">40.75</span><span class="p">),</span> <span class="nv">time</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="k">let</span> <span class="nv">mapViewC</span> <span class="o">=</span> <span class="n">mapViewC</span> <span class="p">{</span>
    <span class="n">mapViewC</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mf">0.0002</span>
    <span class="n">mapViewC</span><span class="o">.</span><span class="nf">animateToPosition</span><span class="p">(</span><span class="kt">MaplyCoordinateMakeWithDegrees</span><span class="p">(</span><span class="o">-</span><span class="mf">73.99</span><span class="p">,</span> <span class="mf">40.75</span><span class="p">),</span> <span class="nv">time</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>

</li></ul>

<p>Next, move to the end of your viewDidLoad method and call the following method call, which we’ll fill in shortly.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// add the CartoDB layer
</span><span class="p">[</span><span class="n">self</span> <span class="nf">addBuildings</span><span class="p">];</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// add the CartoDB layer</span>
<span class="nf">addBuildings</span><span class="p">()</span></code></pre></div>

</li></ul>

<p>Put the new <em>addBuildings</em> method near the end of your ViewController.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">addBuildings</span>
<span class="p">{</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">search</span> <span class="o">=</span> <span class="s">@"SELECT the_geom,address,ownername,numfloors FROM mn_mappluto_13v1 WHERE the_geom &amp;&amp; ST_SetSRID(ST_MakeBox2D(ST_Point(%f, %f), ST_Point(%f, %f)), 4326) LIMIT 2000;"</span><span class="p">;</span>

    <span class="n">CartoDBLayer</span> <span class="o">*</span><span class="n">cartoLayer</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CartoDBLayer</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithSearch</span><span class="p">:</span><span class="n">search</span><span class="p">];</span>
    <span class="n">cartoLayer</span><span class="p">.</span><span class="n">minZoom</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
    <span class="n">cartoLayer</span><span class="p">.</span><span class="n">maxZoom</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
    <span class="n">MaplySphericalMercator</span> <span class="o">*</span><span class="n">coordSys</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MaplySphericalMercator</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWebStandard</span><span class="p">];</span>
    <span class="n">MaplyQuadPagingLayer</span> <span class="o">*</span><span class="n">quadLayer</span> <span class="o">=</span> 
        <span class="p">[[</span><span class="n">MaplyQuadPagingLayer</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithCoordSystem</span><span class="p">:</span><span class="n">coordSys</span> <span class="nf">delegate</span><span class="p">:</span><span class="n">cartoLayer</span><span class="p">];</span>
    <span class="p">[</span><span class="n">theViewC</span> <span class="nf">addLayer</span><span class="p">:</span><span class="n">quadLayer</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">private</span> <span class="kd">func</span> <span class="nf">addBuildings</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">search</span> <span class="o">=</span> <span class="s">"SELECT the_geom,address,ownername,numfloors FROM mn_mappluto_13v1 WHERE the_geom &amp;&amp; ST_SetSRID(ST_MakeBox2D(ST_Point(%f, %f), ST_Point(%f, %f)), 4326) LIMIT 2000;"</span>

      <span class="k">let</span> <span class="nv">cartoLayer</span> <span class="o">=</span> <span class="kt">CartoDBLayer</span><span class="p">(</span><span class="nv">search</span><span class="p">:</span> <span class="n">search</span><span class="p">)</span>
      <span class="n">cartoLayer</span><span class="o">.</span><span class="nf">setMinZoom</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
      <span class="n">cartoLayer</span><span class="o">.</span><span class="nf">setMaxZoom</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
      <span class="k">let</span> <span class="nv">coordSys</span> <span class="o">=</span> <span class="kt">MaplySphericalMercator</span><span class="p">(</span><span class="nv">webStandard</span><span class="p">:</span> <span class="p">())</span>
      <span class="k">if</span> <span class="k">let</span> <span class="nv">quadLayer</span> <span class="o">=</span> <span class="kt">MaplyQuadPagingLayer</span><span class="p">(</span><span class="nv">coordSystem</span><span class="p">:</span> <span class="n">coordSys</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="n">cartoLayer</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">theViewC</span><span class="p">?</span><span class="o">.</span><span class="nf">addLayer</span><span class="p">(</span><span class="n">quadLayer</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span></code></pre></div>

</li></ul>

<p>That SQL query is pretty interesting, but we’ll come back to it later.  Here’s how we set things up to display.</p>

<ul>
  <li>Create the CartoDBLayer with the search string.</li>
  <li>Restrict the zoom levels to just level 15.</li>
  <li>Declare that this data is in spherical mercator, which is normal with web maps.</li>
  <li>Create a MaplyQuadPagingLayer with that coordinate system and cartoLayer delegate.</li>
  <li>Add the MaplyQuadPagingLayer to the globe or map view controller so it starts working.</li>
</ul>

<p>That’s pretty much it.  The rest of the action is in the CartoDBLayer.</p>

<h3 id="cartodblayer-implementation">CartoDBLayer Implementation</h3>

<p>The good parts are in CartodDBLayer class.  Yours should be empty, so let’s start with the init method.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="nf">initWithSearch</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">inSearch</span>
<span class="p">{</span>
    <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">init</span><span class="p">];</span>
    <span class="n">search</span> <span class="o">=</span> <span class="n">inSearch</span><span class="p">;</span>
    <span class="n">opQueue</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSOperationQueue</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>

    <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="nf">init</span><span class="p">(</span><span class="nv">search</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">self</span><span class="o">.</span><span class="n">search</span> <span class="o">=</span> <span class="n">search</span>
      <span class="k">self</span><span class="o">.</span><span class="n">opQueue</span> <span class="o">=</span> <span class="kt">NSOperationQueue</span><span class="p">()</span>

      <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
   <span class="p">}</span></code></pre></div>

</li></ul>

<p>We’re squirreling that search string away for later and we promise to explain it soon.  We’ll need that NSOperationQueue later too.</p>

<h3 id="fetching-data-per-tile">Fetching Data Per Tile</h3>

<p>The most important method in the MaplyPagingDelegate is <em>startFetchForTile</em>.  This is how the toolkit tells us to go get our data for a given tile and display it.  Let’s take a look.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">startFetchForTile</span><span class="p">:(</span><span class="n">MaplyTileID</span><span class="p">)</span><span class="nv">tileID</span> <span class="nf">forLayer</span><span class="p">:(</span><span class="n">MaplyQuadPagingLayer</span> <span class="o">*</span><span class="p">)</span><span class="nv">layer</span>
<span class="p">{</span>
    <span class="c1">// bounding box for tile
</span>    <span class="n">MaplyBoundingBox</span> <span class="n">bbox</span><span class="p">;</span>
    <span class="p">[</span><span class="n">layer</span> <span class="nf">geoBoundsforTile</span><span class="p">:</span><span class="n">tileID</span> <span class="nf">ll</span><span class="p">:</span><span class="o">&amp;</span><span class="n">bbox</span><span class="p">.</span><span class="n">ll</span> <span class="nf">ur</span><span class="p">:</span><span class="o">&amp;</span><span class="n">bbox</span><span class="p">.</span><span class="n">ur</span><span class="p">];</span>
    <span class="n">NSURLRequest</span> <span class="o">*</span><span class="n">urlReq</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">constructRequest</span><span class="p">:</span><span class="n">bbox</span><span class="p">];</span>

    <span class="c1">// kick off the query asychronously
</span>    <span class="p">[</span><span class="n">NSURLConnection</span> 
     <span class="nf">sendAsynchronousRequest</span><span class="p">:</span><span class="n">urlReq</span> 
     <span class="nf">queue</span><span class="p">:</span><span class="n">opQueue</span> 
     <span class="nf">completionHandler</span><span class="p">:</span>
     <span class="o">^</span><span class="p">(</span><span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">connectionError</span><span class="p">)</span>
     <span class="p">{</span>
        <span class="c1">// parse the resulting GeoJSON
</span>        <span class="n">MaplyVectorObject</span> <span class="o">*</span><span class="n">vecObj</span> <span class="o">=</span> <span class="p">[</span><span class="n">MaplyVectorObject</span> <span class="nf">VectorObjectFromGeoJSON</span><span class="p">:</span><span class="n">data</span><span class="p">]</span><span class="err">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vecObj</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// display a transparent filled polygon
</span>            <span class="n">MaplyComponentObject</span> <span class="o">*</span><span class="n">filledObj</span> <span class="o">=</span>
            <span class="p">[</span><span class="n">layer</span><span class="p">.</span><span class="n">viewC</span> 
                <span class="nf">addVectors</span><span class="p">:@[</span><span class="n">vecObj</span><span class="p">]</span>
                <span class="nf">desc</span><span class="p">:</span><span class="err">@</span><span class="p">{</span><span class="nf">kMaplyColor</span><span class="p">:</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nf">colorWithRed</span><span class="p">:</span><span class="mi">0</span><span class="p">.</span><span class="mi">25</span> 
                                        <span class="nf">green</span><span class="p">:</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span> <span class="nf">blue</span><span class="p">:</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span> <span class="nf">alpha</span><span class="p">:</span><span class="mi">0</span><span class="p">.</span><span class="mi">25</span><span class="p">],</span>
                       <span class="nf">kMaplyFilled</span><span class="p">:</span> <span class="err">@</span><span class="p">(</span><span class="nb">YES</span><span class="p">),</span>
                       <span class="nf">kMaplyEnable</span><span class="p">:</span> <span class="err">@</span><span class="p">(</span><span class="nb">NO</span><span class="p">)</span>
                      <span class="p">}</span>
                <span class="nf">mode</span><span class="p">:</span><span class="n">MaplyThreadCurrent</span><span class="p">]</span><span class="err">;</span>

            <span class="c1">// display a line around the lot
</span>            <span class="n">MaplyComponentObject</span> <span class="o">*</span><span class="n">outlineObj</span> <span class="o">=</span>
            <span class="p">[</span><span class="n">layer</span><span class="p">.</span><span class="n">viewC</span> 
                <span class="nf">addVectors</span><span class="p">:@[</span><span class="n">vecObj</span><span class="p">]</span>
                <span class="nf">desc</span><span class="p">:</span><span class="err">@</span><span class="p">{</span><span class="nf">kMaplyColor</span><span class="p">:</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nf">redColor</span><span class="p">],</span>
                       <span class="nf">kMaplyFilled</span><span class="p">:</span> <span class="err">@</span><span class="p">(</span><span class="nb">NO</span><span class="p">),</span>
                       <span class="nf">kMaplyEnable</span><span class="p">:</span> <span class="err">@</span><span class="p">(</span><span class="nb">NO</span><span class="p">)</span>
                      <span class="p">}</span>
                <span class="nf">mode</span><span class="p">:</span><span class="n">MaplyThreadCurrent</span><span class="p">]</span><span class="err">;</span>

            <span class="c1">// keep track of it in the layer
</span>            <span class="p">[</span><span class="n">layer</span> <span class="nf">addData</span><span class="p">:@[</span><span class="n">filledObj</span><span class="p">,</span><span class="n">outlineObj</span><span class="p">]</span> <span class="nf">forTile</span><span class="p">:</span><span class="n">tileID</span><span class="p">]</span><span class="err">;</span>
        <span class="p">}</span>

        <span class="c1">// let the layer know the tile is done
</span>        <span class="p">[</span><span class="n">layer</span> <span class="nf">tileDidLoad</span><span class="p">:</span><span class="n">tileID</span><span class="p">]</span><span class="err">;</span>
     <span class="p">}];</span>
<span class="p">}</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">startFetchForTile</span><span class="p">(</span><span class="nv">tileID</span><span class="p">:</span> <span class="kt">MaplyTileID</span><span class="p">,</span> <span class="n">forLayer</span> <span class="nv">layer</span><span class="p">:</span> <span class="kt">MaplyQuadPagingLayer</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// bounding box for tile</span>
   <span class="k">let</span> <span class="nv">bbox</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="nf">boundsForTile</span><span class="p">(</span><span class="n">tileID</span><span class="p">)</span>
   <span class="k">let</span> <span class="nv">urlReq</span> <span class="o">=</span> <span class="nf">constructRequest</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>

   <span class="kt">NSURLConnection</span><span class="o">.</span><span class="nf">sendAsynchronousRequest</span><span class="p">(</span><span class="n">urlReq</span><span class="p">,</span> <span class="nv">queue</span><span class="p">:</span> <span class="n">opQueue</span><span class="o">!</span><span class="p">)</span>
   <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
      <span class="c1">// parse the resulting GeoJSON</span>
      <span class="k">if</span> <span class="k">let</span> <span class="nv">vecObj</span> <span class="o">=</span> <span class="kt">MaplyVectorObject</span><span class="p">(</span><span class="nv">fromGeoJSON</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
         <span class="c1">// display a transparent filled polygon</span>
         <span class="k">let</span> <span class="nv">filledObj</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">viewC</span><span class="o">!.</span><span class="nf">addVectors</span><span class="p">([</span><span class="n">vecObj</span><span class="p">],</span>
            <span class="nv">desc</span><span class="p">:</span> <span class="p">[</span>
               <span class="nv">kMaplyColor</span><span class="p">:</span> <span class="kt">UIColor</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">),</span>
               <span class="nv">kMaplyFilled</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
               <span class="nv">kMaplyEnable</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">],</span>
            <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="kt">Current</span><span class="p">)</span>

         <span class="c1">// display a line around the lot</span>
         <span class="k">let</span> <span class="nv">outlineObj</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">viewC</span><span class="o">!.</span><span class="nf">addVectors</span><span class="p">([</span><span class="n">vecObj</span><span class="p">],</span>
            <span class="nv">desc</span><span class="p">:</span> <span class="p">[</span>
               <span class="nv">kMaplyColor</span><span class="p">:</span> <span class="kt">UIColor</span><span class="o">.</span><span class="nf">redColor</span><span class="p">(),</span>
               <span class="nv">kMaplyFilled</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
               <span class="nv">kMaplyEnable</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">],</span>
            <span class="nv">mode</span><span class="p">:</span> <span class="o">.</span><span class="kt">Current</span><span class="p">)</span>

         <span class="c1">// keep track of it in the layer</span>
         <span class="n">layer</span><span class="o">.</span><span class="nf">addData</span><span class="p">([</span><span class="n">filledObj</span><span class="p">,</span> <span class="n">outlineObj</span><span class="p">],</span> <span class="nv">forTile</span><span class="p">:</span> <span class="n">tileID</span><span class="p">)</span>

         <span class="c1">// let the layer know the tile is done</span>
         <span class="n">layer</span><span class="o">.</span><span class="nf">tileDidLoad</span><span class="p">(</span><span class="n">tileID</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span></code></pre></div>

</li></ul>

<p>We’re only going to get these requests for level 15, since we set our <em>minZoom</em> and <em>maxZoom</em> to 15.  So you can avoid thinking about levels.  That means a given tile request will come in and its our job to get the data <strong>for just that tile</strong>.</p>

<h3 id="startfetchfortile-details">startFetchForTile Details</h3>

<p>First, we ask the MaplyQuadPagingLayer what the bounds are for the tile.  We’ll need those to construct the query, which we’ll talk about shortly.</p>

<p>Once we’ve got the query from the <em>constructRequest</em> method, we kick off an asychronous call to NSURLConnection to go get the data.  We’re expecting GeoJSON back.  The connection will call our little code block when it finishes and we’ll be on a thread associated with the NSOperationQueue we created earlier.</p>

<p>Mobile apps are heavily threaded and WhirlyGlobe-Maply is built for it.  We can add and remove display data on any thread we like.  Sure enough, in that little execution block we turn the data into a MaplyVectorObject by parsing the GeoJSON and we display it in two different ways: (1) as a filled transparent polygon and (2) as a solid outline.</p>

<p>The display version is now created, but we’re not done yet.  We still need to tell the MaplyQuadPagingLayer what we did.</p>

<p>That’s what the <em>addData:</em> call is for.  The MaplyQuadPagingLayer now knows about those two objects and can delete them when they’re no longer needed.  </p>

<p>Lastly, we tell the layer that the <em>tileDidLoad:</em> and we’re done.</p>

<h3 id="building-cartodb-requests">Building CartoDB Requests</h3>

<p>Let’s circle back to the CartoDB Request.  We have the bounding box for a tile and we need the NSURLRequest to go get the data.  Add this to your CartoDBLayer class:</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="n">NSURLRequest</span> <span class="o">*</span><span class="p">)</span><span class="nf">constructRequest</span><span class="p">:(</span><span class="n">MaplyBoundingBox</span><span class="p">)</span><span class="nv">bbox</span>
<span class="p">{</span>
    <span class="kt">double</span> <span class="n">toDeg</span> <span class="o">=</span> <span class="mi">180</span><span class="o">/</span><span class="n">M_PI</span><span class="p">;</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">stringWithFormat</span><span class="p">:</span><span class="n">search</span><span class="p">,</span><span class="n">bbox</span><span class="p">.</span><span class="n">ll</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">toDeg</span><span class="p">,</span><span class="n">bbox</span><span class="p">.</span><span class="n">ll</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">toDeg</span><span class="p">,</span><span class="n">bbox</span><span class="p">.</span><span class="n">ur</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">toDeg</span><span class="p">,</span><span class="n">bbox</span><span class="p">.</span><span class="n">ur</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">toDeg</span><span class="p">];</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">encodeQuery</span> <span class="o">=</span> <span class="p">[</span><span class="n">query</span> <span class="nf">stringByAddingPercentEscapesUsingEncoding</span><span class="p">:</span><span class="n">NSUTF8StringEncoding</span><span class="p">];</span>
    <span class="n">encodeQuery</span> <span class="o">=</span> <span class="p">[</span><span class="n">encodeQuery</span> <span class="nf">stringByReplacingOccurrencesOfString</span><span class="p">:</span><span class="s">@"&amp;"</span> <span class="nf">withString</span><span class="p">:</span><span class="s">@"%26"</span><span class="p">];</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">fullUrl</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">stringWithFormat</span><span class="p">:</span><span class="s">@"https://pluto.cartodb.com/api/v2/sql?format=GeoJSON&amp;q=%@"</span><span class="p">,</span><span class="n">encodeQuery</span><span class="p">];</span>
    <span class="n">NSURLRequest</span> <span class="o">*</span><span class="n">urlReq</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="n">fullUrl</span><span class="p">]];</span>

    <span class="k">return</span> <span class="n">urlReq</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">constructRequest</span><span class="p">(</span><span class="nv">bbox</span><span class="p">:</span> <span class="kt">MaplyBoundingBox</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">NSURLRequest</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">toDeg</span> <span class="o">=</span> <span class="kt">Float</span><span class="p">(</span><span class="mf">180.0</span><span class="o">/</span><span class="kt">M_PI</span><span class="p">)</span>
   <span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">NSString</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="n">search</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ll</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">toDeg</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ll</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">toDeg</span><span class="p">,</span><span class="n">bbox</span><span class="o">.</span><span class="n">ur</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">toDeg</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ur</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">toDeg</span><span class="p">)</span>
   <span class="k">var</span> <span class="nv">encodeQuery</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="nf">stringByAddingPercentEscapesUsingEncoding</span><span class="p">(</span><span class="kt">NSUTF8StringEncoding</span><span class="p">)</span>
   <span class="k">let</span> <span class="nv">range</span> <span class="o">=</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">.</span><span class="kt">Index</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">start</span><span class="p">:</span> <span class="n">encodeQuery</span><span class="o">!.</span><span class="n">startIndex</span><span class="p">,</span> <span class="nv">end</span><span class="p">:</span> <span class="n">encodeQuery</span><span class="o">!.</span><span class="n">endIndex</span><span class="p">)</span>
    <span class="n">encodeQuery</span> <span class="o">=</span> <span class="n">encodeQuery</span><span class="o">!.</span><span class="nf">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">"&amp;"</span><span class="p">,</span> <span class="nv">withString</span><span class="p">:</span> <span class="s">"%26"</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kt">NSStringCompareOptions</span><span class="o">.</span><span class="n">allZeros</span><span class="p">,</span> <span class="nv">range</span><span class="p">:</span> <span class="n">range</span><span class="p">)</span>
   <span class="k">let</span> <span class="nv">fullUrl</span> <span class="o">=</span> <span class="kt">NSString</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="s">"https://pluto.cartodb.com/api/v2/sql?format=GeoJSON&amp;q=%@"</span><span class="p">,</span> <span class="n">encodeQuery</span><span class="o">!</span><span class="p">)</span> <span class="k">as</span> <span class="kt">String</span>
   <span class="k">let</span> <span class="nv">urlReq</span> <span class="o">=</span> <span class="kt">NSURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">fullUrl</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>

   <span class="k">return</span> <span class="n">urlReq</span>
<span class="p">}</span></code></pre></div>

</li></ul>

<p>This is filling in the bounding box from the tile and constructing a real search string.  It’s appending it onto the URL for the CartoDB site and dealing with the encoding issues for characters.  Then it returns a usable NSURLRequest, which we need to talk to the server.</p>

<p>Let’s look at that search string.</p>

<h3 id="cartodb-sql">CartoDB SQL</h3>

<p>You might recall we fed in a search string that looked like this.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0">
  
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="n">NSString</span> <span class="o">*</span><span class="n">search</span> <span class="o">=</span> <span class="s">@"SELECT the_geom,address,ownername,numfloors FROM mn_mappluto_13v1 WHERE the_geom &amp;&amp; ST_SetSRID(ST_MakeBox2D(ST_Point(%f, %f), ST_Point(%f, %f)), 4326) LIMIT 2000;"</span><span class="p">;</span></code></pre></div>


  </li><li data-index="1">

  
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">search</span> <span class="o">=</span> <span class="s">"SELECT the_geom,address,ownername,numfloors FROM mn_mappluto_13v1 WHERE the_geom &amp;&amp; ST_SetSRID(ST_MakeBox2D(ST_Point(%f, %f), ST_Point(%f, %f)), 4326) LIMIT 2000;"</span></code></pre></div>

</li></ul>

<p>Okay, this is SQL so it <em>is</em> as complex as it looks.  I recommend perusing the <a href="http://docs.cartodb.com" target="_blank">CartoDB docs</a> for the full explanation of what’s going on here.  But to put it simply.</p>

<ul>
  <li>We’re asking for data from the Manhattan PLUTO table.</li>
  <li>We want the geometry (polygons), the address, owner, and number of floors.</li>
  <li>But only within the given bounding box.</li>
  <li>Oh, and keep it down to 2000 objects max.</li>
</ul>

<p>We fill in the bounding box in the <em>constructRequest</em> method and pass back a functional NSURLRequest.  From that we can fetch the data.</p>

<h3 id="results">Results</h3>

<p>Whew!  That was a lot of code for a tutorial.  Let’s run the app and see what happens.</p>

<p><img src="/WhirlyGlobe/images/tutorial/cartodb_results.png" alt="CartoDB App" /></p>

<p>If you don’t see that or it didn’t compile, take a look at the code snippets.  Or you can just look at the complete files.</p>

<ul>
  <li>Objective-C
    <ul>
      <li><a href="code/ViewController_cartodb.m">ViewController.m</a> Your main view controller.</li>
      <li><a href="code/CartoDBLayer.h">CartoDBLayer.h</a> CartoDBLayer header.</li>
      <li><a href="code/CartoDBLayer.m">CartoDBLayer.m</a> CartoDBLayer implementation.</li>
    </ul>
  </li>
  <li>Swift
    <ul>
      <li><a href="code/ViewController_cartodb.swift">ViewController.swift</a> Your main view controller.</li>
      <li><a href="code/CartoDBLayer.swift">CartoDBLayer.swift</a> CartoDBLayer class.</li>
    </ul>
  </li>
</ul>


          </div>

          <div class="col-sm-3 tutorial tutorial-sidebar">
            <div data-spy="affix" data-offset-bottom="124">
              <div class="sidebar-module">
                <nav>
                  <div class="trigger">
                    <ol class="list-unstyled sidebar-headers">
                      
                      <li class="sidebar-header-item">Getting Started</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/getting_started.html">Before You Start</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/hello_earth.html">Hello Earth Project</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/building_from_source.html">Source Distribution</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/building_from_binary.html">Binary Distribution</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/building_from_cocoapod.html">Cocoapods</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Basics of Display</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/globe_or_map.html">Globe Or Map</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/your_first_globe.html">Your First Globe</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/your_first_map.html">Your First Map</a></li>
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Image Based Maps</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/local_image_layer.html">Local Image Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/remote_image_layer.html">Remote Image Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/remote_NASA_image_layers.html">NASA Image Layers</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Overlays</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/adding_vector_data.html">Vector Data</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/screen_markers.html">Screen Markers</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/screen_labels.html">Screen Labels</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Shapes</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/spheres.html">Spheres</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Interaction</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/vector_selection.html">Vector Selection</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/screen_marker_selection.html">Screen Marker Selection</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Advanced</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item current"><a class="page-link" href="/WhirlyGlobe/tutorial/cartodb_layer.html">CartoDB Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/aeris_weather.html">Aeris Weather Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/component_tester.html">Component Tester</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/micello_map.html">Micello Indoor Maps</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                    </ol>
                  </div>
                </nav>

              </div>
            </div>
          </div>

        </div>

        <div class="row">
          <div class="col-sm-9" id="prev-next">
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            

            <!-- what follows is kinda horrifying -->
            <!-- is the current page the first page of the first tutorial section? -->
            

            <!-- is the current page the last page of the last tutorial section? -->
            

            <!-- is the current page the first in a tutorial section? -->
            
            <!-- does this tutorial section have more than one page? -->
            
            
            
            
            
            
            
            
            

            <!-- deliver next/prev links -->
            <a class="prev" href="/WhirlyGlobe/tutorial/screen_marker_selection.html">Previous</a><a class="next" href="/WhirlyGlobe/tutorial/aeris_weather.html">Next</a>

            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

          </div>
        </div>

      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/WhirlyGlobe/js/bootstrap.min.js"></script>

<footer class="site-footer">

  <div class="container">
    <div class="row">
      <div class="col-sm-12">

        <div class="col-sm-2">
          <ul class="contact-list">
            <li><a href="/WhirlyGlobe/">WhirlyGlobe-Maply</a></li>
            <li><a href="mailto:contact@mousebirdconsulting.com">contact@mousebirdconsulting.com</a></li>
          </ul>
        </div>

        <div class="col-sm-6 col-sm-offset-1">
          <p class="site-description">
            An open source geospatial display toolkit<br /> for iOS and Android.
          </p>
          <p class="site-description">
            <small>Ⓒ 2016 mousebird consulting.</small>
          </p>
        </div>

        <div class="col-sm-3 ">
          <ul class="social-media-list">
            
            <li>
              <a href="https://github.com/mousebird">
                <span class="username">mousebird</span>
                <span class="icon icon--github">
                  <svg viewBox="0 0 16 16">
                    <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                  </svg>
                </span>
              </a>
            </li>
            

            
            <li>
              <a href="https://twitter.com/mousebirdc">
                <span class="username">mousebirdc</span>
                <span class="icon icon--twitter">
                  <svg viewBox="0 0 16 16">
                    <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                    c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                  </svg>
                </span>
              </a>
            </li>
            
          </ul>

        </div>

      </div>
    </div>
  </div>
</footer>

    <script src="/WhirlyGlobe/js/tutorial.js"></script>
  </body>
</html>
